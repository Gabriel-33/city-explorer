<!-- pages/home/home.component.html -->
<div class="container">
  <div class="content">
    <!-- FormulÃ¡rio (mantido igual) -->
    <form [formGroup]="itineraryForm" (ngSubmit)="onSubmit()" class="itinerary-form">
      <div class="form-row">
        <div class="form-group">
          <label for="city">ğŸ™ï¸ Cidade:</label>
          <input 
            id="city"
            formControlName="city"
            placeholder="Ex: Russas, Fortaleza, Rio de Janeiro..."
            class="form-control"
          >
          <small *ngIf="itineraryForm.get('city')?.invalid && itineraryForm.get('city')?.touched" class="error">
            Digite o nome da cidade (mÃ­n. 3 caracteres)
          </small>
        </div>

        <div class="form-group">
          <label for="state">ğŸ—ºï¸ Estado:</label>
          <select id="state" formControlName="state" class="form-control">
            <option value="">Selecione o estado</option>
            <option *ngFor="let state of states" [value]="state">
              {{state}}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="duration">ğŸ“… Dias de Viagem:</label>
          <input 
            id="duration"
            type="number"
            formControlName="duration"
            min="1"
            max="7"
            class="form-control"
          >
        </div>
      </div>

      <div class="form-group">
        <label>ğŸ’° OrÃ§amento:</label>
        <div class="budget-options">
          <label *ngFor="let budget of budgetOptions" class="budget-option">
            <input 
              type="radio" 
              formControlName="budget" 
              [value]="budget.value"
            >
            <span>{{budget.label}}</span>
          </label>
        </div>
      </div>

      <div class="form-group">
        <label>ğŸ¯ Interesses (opcional):</label>
        <div class="interests-grid">
          <label *ngFor="let interest of interestsList" class="interest-option">
            <input 
              type="checkbox"
              [value]="interest"
              (change)="onInterestChange(interest, $event)"
            >
            <span>{{interest}}</span>
          </label>
        </div>
      </div>

      <div class="button-container">
        <button 
            type="submit" 
            class="btn-primary"
            [disabled]="!itineraryForm.valid || isLoading"
        >
            {{ isLoading ? 'ğŸ—ºï¸ Criando roteiro...' : 'âœ¨ Criar Roteiro' }}
        </button>
      </div>
    </form>

    <!-- AD 2: ApÃ³s o formulÃ¡rio (antes dos resultados) -->
    <div *ngIf="!isLoading && !itinerary && !error">
      <!--<app-ad-unit 
        adSlot="8090728721" 
        adFormat="rectangle"
        [isMobile]="true"
        [showPlaceholder]="true">
      </app-ad-unit>!-->
    </div>

    <!-- Loading State -->

    <!-- Resultado - VERSÃƒO SUPER SIMPLIFICADA -->
    <div *ngIf="itinerary" class="itinerary-section">
      
      <div class="itinerary-header">
        <h2>ğŸŒ† {{itinerary.city}}, {{itinerary.state}}</h2>
        <p class="summary">{{itinerary.summary}}</p>
      </div>

      <!-- Dias do itinerÃ¡rio - SEM COMPLICAÃ‡Ã•ES -->
      <div *ngFor="let day of itinerary.days; let i = index" class="day-card">
        <h3>ğŸ“… Dia {{day.day}}: {{day.title}}</h3>
        
        <div class="places-grid">
          <div *ngFor="let place of day.places" class="place-card">
            
            <!-- IMAGEM MUITO SIMPLES -->
            <div class="place-image">
              <div [style.background]="getPlaceGradient(place)"
                   style="height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem;">
                {{getPlaceIcon(place)}}
              </div>
              
              <!-- BADGE COM CATEGORIA -->
              <span class="category-badge" [class]="getBadgeClass(place)">
                {{place.category || 'Ponto TurÃ­stico'}}
              </span>
            </div>
            
            <div class="place-content">
              <h4>{{place.name}}</h4>
              <p class="description">{{place.description}}</p>
              
              <!-- METADADOS ORIGINAIS -->
              <div class="place-meta">
                <span class="meta-item">â±ï¸ {{place.visitDuration || '1-2 horas'}}</span>
                <span class="meta-item">ğŸ•’ {{place.bestTime || 'HorÃ¡rio flexÃ­vel'}}</span>
                <span class="meta-item">ğŸ’µ {{place.cost || 'N/I'}}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- AD 5: ApÃ³s o primeiro dia -->
        <div *ngIf="i === 1 && itinerary.days.length > 2">
          <!--<app-ad-unit 
            adSlot="auto" 
            adFormat="rectangle"
            [isMobile]="true"
            [showPlaceholder]="true">
          </app-ad-unit>!-->
        </div>
      </div>

      <!-- AD 6: Antes das dicas finais -->
      <!--<app-ad-unit 
        adSlot="auto" 
        adFormat="rectangle"
        [isMobile]="true"
        [showPlaceholder]="true">
      </app-ad-unit>!-->

      <!-- Dicas -->
      <div class="tips-section">
        <h4>ğŸ’¡ Dicas para {{itinerary.city}}</h4>
        <ul>
          <li *ngFor="let tip of itinerary.tips">{{tip}}</li>
        </ul>
      </div>

      <!-- AD 7: Footer da pÃ¡gina -->
      <!--<app-ad-unit 
        adSlot="7530463702" 
        adFormat="horizontal"
        [isMobile]="false"
        [showPlaceholder]="false">
      </app-ad-unit>!-->

      <div class="action-buttons">
        <button (click)="resetForm()" class="btn-outline">
          ğŸ—ºï¸ Nova Busca
        </button>
      </div>
    </div>

    <!-- Erro -->
    <div *ngIf="error" class="error-message">
      âŒ {{error}}
    </div>
  </div>
</div>